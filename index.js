import{i as b,a as q}from"./assets/vendor-BLO6kU33.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".header-logo"),e=document.querySelector(".burger-btn"),n=document.querySelector(".close-btn"),r=document.querySelector(".menu"),o=document.querySelector(".menu-overlay"),i=document.body,l=()=>{r&&o&&i&&(r.classList.add("open"),o.classList.add("visible"),i.classList.add("no-scroll"))},m=()=>{r&&o&&i&&(r.classList.remove("open"),o.classList.remove("visible"),i.classList.remove("no-scroll"))};e&&e.addEventListener("click",l),n&&n.addEventListener("click",m),o&&o.addEventListener("click",m),t&&t.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("keydown",O=>{O.key==="Escape"&&m()})});const $="https://furniture-store.b.goit.study/api",h=document.getElementById("category-list"),B=document.getElementById("furniture-list"),s=document.getElementById("pagination"),p=document.getElementById("load-more-mobile");let L=1,u=[],a=1;const M=8;let v="",C=1;async function P(){const t=await fetch(`${$}/categories`);if(!t.ok)throw new Error("Помилка отримання категорій");return await t.json()}async function S(t=1,e=""){let n=`${$}/furnitures?page=${t}&limit=${M}`;e&&(n+=`&category=${e}`);const r=await fetch(n);if(!r.ok)throw new Error("Помилка отримання меблів");return await r.json()}function A(t){const e="/img/furniture-list/всі-товари.png",n={"Всі товари":"всі-товари.png","М'які меблі":"мякі-меблі.png","Шафи та системи зберігання":"шафи.png","Ліжка та матраци":"ліжка.png",Столи:"столи.png","Стільці та табурети":"стільці.png",Кухні:"кухні.png","Меблі для дитячої":"меблі-дитячі.png","Меблі для офісу":"меблі-офіс.png","Меблі для передпокою":"передпокій.png","Меблі для ванної кімнати":"меблі-вана.png","Садові та вуличні меблі":"меблі-садові.png","Декор та аксесуари":"декор.png"},r=t.map(o=>{let i=o.name.replace(/^"|"$/g,"");const m=`/img/furniture-list/${n[i]||"всі-товари.png"}`;return`
        <li class="category-btn-tile" data-category="${o._id}">
          <img src="${m}" alt="${i}" onerror="this.onerror=null;this.src='${e}'" />
          <span class="category-label">${i}</span>
        </li>
      `}).join("");h.innerHTML=`
    <li class="category-btn-tile active" data-category="">
      <img src="${e}" alt="Всі товари" />
      <span class="category-label">Всі товари</span>
    </li>
    ${r}
  `}function w(t){B.innerHTML=t.map(({images:e,name:n,color:r,price:o,_id:i})=>`
    <li class="furniture-item" data-id="${i}">
      <img src="${e[0]}" alt="${n}" />
      <div class="furniture-item-content">
        <h3>${n}</h3>
        <div>${H(r)}</div>
        <p>${o} грн</p>
        <button class="details-btn" data-id="${i}">Детальніше</button>
      </div>
    </li>
  `).join("")}function H(t){return(Array.isArray(t)?t:[t]).map(n=>`<span class="color-swatch" title="${n}" style="background-color: ${n};"></span>`).join("")}function d(t,{active:e=!1,onClick:n=null}={}){const r=document.createElement("button");return r.textContent=t,r.classList.add("page-btn"),e&&r.classList.add("active"),n&&r.addEventListener("click",n),r}function k(t,{disabled:e=!1}={},n=null){const r=document.createElement("button");r.classList.add("pagination-arrow"),e&&(r.disabled=!0),!e&&n&&r.addEventListener("click",n);const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg");i.setAttribute("width","14"),i.setAttribute("height","14"),i.setAttribute("viewBox","0 0 14 14");const l=document.createElementNS(o,"path");return l.setAttribute("d",t==="left"?"M8.707 12.293L7.293 13.707L0.586 6.99997L7.293 0.292969L8.707 1.70697L4.414 5.99997H14V7.99997H4.414L8.707 12.293Z":"M5.293 12.293L6.707 13.707L13.414 6.99997L6.707 0.292969L5.293 1.70697L9.586 5.99997H0V7.99997H9.586L5.293 12.293Z"),l.setAttribute("fill",e?"#ccc":"currentColor"),i.appendChild(l),r.appendChild(i),r}function g(){const t=document.createElement("span");return t.classList.add("pagination-dots"),t.innerHTML='<span class="dot"></span><span class="dot"></span><span class="dot"></span>',t}function I(t,e){if(s.innerHTML="",s.appendChild(k("left",{disabled:t===1},()=>{a--,c()})),e<=5)for(let n=1;n<=e;n++)s.appendChild(d(n,{active:n===t,onClick:()=>{a=n,c()}}));else if(t<=3){for(let n=1;n<=3;n++)s.appendChild(d(n,{active:n===t,onClick:()=>{a=n,c()}}));s.appendChild(g()),s.appendChild(d(e,{onClick:()=>{a=e,c()}}))}else if(t>=e-2){s.appendChild(d(1,{onClick:()=>{a=1,c()}})),s.appendChild(g());for(let n=e-2;n<=e;n++)s.appendChild(d(n,{active:n===t,onClick:()=>{a=n,c()}}))}else s.appendChild(d(1,{onClick:()=>{a=1,c()}})),s.appendChild(g()),s.appendChild(d(t-1,{onClick:()=>{a--,c()}})),s.appendChild(d(t,{active:!0})),s.appendChild(d(t+1,{onClick:()=>{a++,c()}})),s.appendChild(g()),s.appendChild(d(e,{onClick:()=>{a=e,c()}}));s.appendChild(k("right",{disabled:t===e},()=>{a++,c()}))}async function c(){const t=window.innerWidth<=768;try{const e=await S(t?1:a,v);C=Math.ceil(e.totalItems/M),t?(L===1&&(u=e.furnitures),w(u),p&&(p.style.display=u.length>=e.totalItems?"none":"inline-block"),s.innerHTML="",s.classList.add("hidden")):(w(e.furnitures),p&&(p.style.display="none"),C>1?(I(a,C),s.classList.remove("hidden")):(s.innerHTML="",s.classList.add("hidden")))}catch(e){console.error("Помилка завантаження меблів:",e)}}h&&h.addEventListener("click",t=>{const e=t.target.closest("li.category-btn-tile");e&&v!==e.dataset.category&&(v=e.dataset.category,a=1,L=1,u=[],[...h.children].forEach(n=>n.classList.remove("active")),e.classList.add("active"),c())});p&&p.addEventListener("click",async()=>{L++;try{const t=await S(L,v);u=[...u,...t.furnitures],w(u),u.length>=t.totalItems&&(p.style.display="none")}catch(t){console.error('Помилка завантаження меблів при "Показати ще":',t)}});(async function(){try{const e=await P();A(e),c()}catch(e){console.error("Помилка ініціалізації:",e)}})();const y=document.querySelector(".order-modal-overlay"),E=document.querySelector(".order-modal-form");function f(t){const e=document.querySelector(".open-order");e&&(e.classList.remove("open-order"),document.removeEventListener("keydown",n=>{n.key==="Escape"&&f()}))}function F(t){y&&(t.preventDefault(),y.classList.add("open-order"),document.addEventListener("keydown",e=>{e.key==="Escape"&&f()}),y.addEventListener("click",e=>{e.target===y&&f()}))}E.addEventListener("submit",async t=>{if(t.preventDefault(),!E.checkValidity()){b.warning({title:"Увага",message:"Будь ласка, заповніть всі обов’язкові поля",position:"topRight"});return}const e=t.target.elements["user-email"].value.trim(),n=t.target.elements["user-phone"].value.trim(),r=t.target.elements["user-comment"].value.trim(),o={email:e,phone:n,modelId:"682f9bbf8acbdf505592ac36",color:"#1212ca",comment:r};try{const i=await q.post("https://furniture-store.b.goit.study/api-docs/#/order",o);b.success({title:"Готово!",message:"Замовлення успішно створено",position:"topRight"}),f(),E.reset()}catch{b.error({title:"Помилка",message:"Не вдалося створити замовлення",position:"topRight"})}});const T=document.querySelector(".order-modal-close");T.addEventListener("click",f);const N=document.querySelector(".btn-btn");N.addEventListener("click",F);
//# sourceMappingURL=index.js.map
