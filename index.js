import{a as $,i as m,S as B,N as H,P as j}from"./assets/vendor-CINvsALW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".header-logo"),t=document.querySelector(".burger-btn"),n=document.querySelector(".close-btn"),s=document.querySelector(".menu"),r=document.querySelector(".menu-overlay"),i=document.body,l=()=>{s&&r&&i&&(s.classList.add("open"),r.classList.add("visible"),i.classList.add("no-scroll"))},f=()=>{s&&r&&i&&(s.classList.remove("open"),r.classList.remove("visible"),i.classList.remove("no-scroll"))};t&&t.addEventListener("click",l),n&&n.addEventListener("click",f),r&&r.addEventListener("click",f),e&&e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("keydown",q=>{q.key==="Escape"&&f()})});const M="https://furniture-store.b.goit.study/api",b=document.getElementById("category-list"),O=document.getElementById("furniture-list"),o=document.getElementById("pagination"),p=document.getElementById("load-more-mobile");let L=1,u=[],a=1;const S=8;let v="",w=1;async function T(){const e=await fetch(`${M}/categories`);if(!e.ok)throw new Error("Помилка отримання категорій");return await e.json()}async function P(e=1,t=""){let n=`${M}/furnitures?page=${e}&limit=${S}`;t&&(n+=`&category=${t}`);const s=await fetch(n);if(!s.ok)throw new Error("Помилка отримання меблів");return await s.json()}function A(e){const t="/img/furniture-list/всі-товари.png",n={"Всі товари":"всі-товари.png","М'які меблі":"мякі-меблі.png","Шафи та системи зберігання":"шафи.png","Ліжка та матраци":"ліжка.png",Столи:"столи.png","Стільці та табурети":"стільці.png",Кухні:"кухні.png","Меблі для дитячої":"меблі-дитячі.png","Меблі для офісу":"меблі-офіс.png","Меблі для передпокою":"передпокій.png","Меблі для ванної кімнати":"меблі-вана.png","Садові та вуличні меблі":"меблі-садові.png","Декор та аксесуари":"декор.png"},s=e.map(r=>{let i=r.name.replace(/^"|"$/g,"");const f=`/img/furniture-list/${n[i]||"всі-товари.png"}`;return`
        <li class="category-btn-tile" data-category="${r._id}">
          <img src="${f}" alt="${i}" onerror="this.onerror=null;this.src='${t}'" />
          <span class="category-label">${i}</span>
        </li>
      `}).join("");b.innerHTML=`
    <li class="category-btn-tile active" data-category="">
      <img src="${t}" alt="Всі товари" />
      <span class="category-label">Всі товари</span>
    </li>
    ${s}
  `}function E(e){O.innerHTML=e.map(({images:t,name:n,color:s,price:r,_id:i})=>`
    <li class="furniture-item" data-id="${i}">
      <img src="${t[0]}" alt="${n}" />
      <div class="furniture-item-content">
        <h3>${n}</h3>
        <div>${I(s)}</div>
        <p>${r} грн</p>
        <button class="details-btn" data-id="${i}">Детальніше</button>
      </div>
    </li>
  `).join("")}function I(e){return(Array.isArray(e)?e:[e]).map(n=>`<span class="color-swatch" title="${n}" style="background-color: ${n};"></span>`).join("")}function d(e,{active:t=!1,onClick:n=null}={}){const s=document.createElement("button");return s.textContent=e,s.classList.add("page-btn"),t&&s.classList.add("active"),n&&s.addEventListener("click",n),s}function C(e,{disabled:t=!1}={},n=null){const s=document.createElement("button");s.classList.add("pagination-arrow"),t&&(s.disabled=!0),!t&&n&&s.addEventListener("click",n);const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg");i.setAttribute("width","14"),i.setAttribute("height","14"),i.setAttribute("viewBox","0 0 14 14");const l=document.createElementNS(r,"path");return l.setAttribute("d",e==="left"?"M8.707 12.293L7.293 13.707L0.586 6.99997L7.293 0.292969L8.707 1.70697L4.414 5.99997H14V7.99997H4.414L8.707 12.293Z":"M5.293 12.293L6.707 13.707L13.414 6.99997L6.707 0.292969L5.293 1.70697L9.586 5.99997H0V7.99997H9.586L5.293 12.293Z"),l.setAttribute("fill",t?"#ccc":"currentColor"),i.appendChild(l),s.appendChild(i),s}function y(){const e=document.createElement("span");return e.classList.add("pagination-dots"),e.innerHTML='<span class="dot"></span><span class="dot"></span><span class="dot"></span>',e}function F(e,t){if(o.innerHTML="",o.appendChild(C("left",{disabled:e===1},()=>{a--,c()})),t<=5)for(let n=1;n<=t;n++)o.appendChild(d(n,{active:n===e,onClick:()=>{a=n,c()}}));else if(e<=3){for(let n=1;n<=3;n++)o.appendChild(d(n,{active:n===e,onClick:()=>{a=n,c()}}));o.appendChild(y()),o.appendChild(d(t,{onClick:()=>{a=t,c()}}))}else if(e>=t-2){o.appendChild(d(1,{onClick:()=>{a=1,c()}})),o.appendChild(y());for(let n=t-2;n<=t;n++)o.appendChild(d(n,{active:n===e,onClick:()=>{a=n,c()}}))}else o.appendChild(d(1,{onClick:()=>{a=1,c()}})),o.appendChild(y()),o.appendChild(d(e-1,{onClick:()=>{a--,c()}})),o.appendChild(d(e,{active:!0})),o.appendChild(d(e+1,{onClick:()=>{a++,c()}})),o.appendChild(y()),o.appendChild(d(t,{onClick:()=>{a=t,c()}}));o.appendChild(C("right",{disabled:e===t},()=>{a++,c()}))}async function c(){const e=window.innerWidth<=768;try{const t=await P(e?1:a,v);w=Math.ceil(t.totalItems/S),e?(L===1&&(u=t.furnitures),E(u),p&&(p.style.display=u.length>=t.totalItems?"none":"inline-block"),o.innerHTML="",o.classList.add("hidden")):(E(t.furnitures),p&&(p.style.display="none"),w>1?(F(a,w),o.classList.remove("hidden")):(o.innerHTML="",o.classList.add("hidden")))}catch(t){console.error("Помилка завантаження меблів:",t)}}b&&b.addEventListener("click",e=>{const t=e.target.closest("li.category-btn-tile");t&&v!==t.dataset.category&&(v=t.dataset.category,a=1,L=1,u=[],[...b.children].forEach(n=>n.classList.remove("active")),t.classList.add("active"),c())});p&&p.addEventListener("click",async()=>{L++;try{const e=await P(L,v);u=[...u,...e.furnitures],E(u),u.length>=e.totalItems&&(p.style.display="none")}catch(e){console.error('Помилка завантаження меблів при "Показати ще":',e)}});(async function(){try{const t=await T();A(t),c()}catch(t){console.error("Помилка ініціалізації:",t)}})();document.querySelector(".js-feedback-cart");document.querySelector(".js-btn-back");document.querySelector(".js-btn-forward");function N(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function R(e,t=5){let n="";for(let s=1;s<=t;s++)e>=s?n+='<span class="star star--full">★</span>':e>=s-.5?n+=`
        <span class="star star--half">
          <span class="star-bg">★</span>
          <span class="star-fg">★</span>
        </span>`:n+='<span class="star star--empty">★</span>';return n}function V(e){return e.map(({name:t,descr:n,rate:s})=>`
        <div class="swiper-slide">
          <div class="feedback-item">
            <div class="star-rating">${R(N(s))}</div>
            <p class="feedback-descr">"${n}"</p>
            <p class="feedback-name">${t}</p>
          </div>
        </div>
      `).join("")}async function D(){const e=document.querySelector(".js-feedback-cart");if(e)try{const n=(await $.get("https://furniture-store.b.goit.study/api/feedbacks?limit=10")).data.feedbacks;if(!n||n.length===0){m.error({title:"Error",message:"Щось пішло не так. Спробуйте пізніше.",position:"topRight"});return}e.innerHTML=V(n);const s=n.length>3,r=new B(".feedback-slider",{modules:[H,j],slidesPerGroup:1,slidesPerView:1,spaceBetween:16,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".js-btn-forward",prevEl:".js-btn-back"},breakpoints:{768:{slidesPerGroup:2,slidesPerView:2,spaceBetween:24},1440:{slidesPerGroup:3,slidesPerView:3,spaceBetween:24}}})}catch{m.error({title:"Error",message:"Щось пішло не так. Спробуйте пізніше.",position:"topRight"})}}D();const h=document.querySelector(".order-modal-overlay"),k=document.querySelector(".order-modal-form");function g(e){const t=document.querySelector(".open-order");t&&(t.classList.remove("open-order"),document.removeEventListener("keydown",n=>{n.key==="Escape"&&g()}))}function x(e){h&&(e.preventDefault(),h.classList.add("open-order"),document.addEventListener("keydown",t=>{t.key==="Escape"&&g()}),h.addEventListener("click",t=>{t.target===h&&g()}))}k.addEventListener("submit",async e=>{if(e.preventDefault(),!k.checkValidity()){m.warning({title:"Увага",message:"Будь ласка, заповніть всі обов’язкові поля",position:"topRight"});return}const t=e.target.elements["user-email"].value.trim(),n=e.target.elements["user-phone"].value.trim(),s=e.target.elements["user-comment"].value.trim(),r={email:t,phone:n,modelId:"682f9bbf8acbdf505592ac36",color:"#1212ca",comment:s};try{const i=await $.post("https://furniture-store.b.goit.study/api-docs/#/order",r);m.success({title:"Готово!",message:"Замовлення успішно створено",position:"topRight"}),g(),k.reset()}catch{m.error({title:"Помилка",message:"Не вдалося створити замовлення",position:"topRight"})}});const G=document.querySelector(".order-modal-close");G.addEventListener("click",g);const Z=document.querySelector(".btn-btn");Z.addEventListener("click",x);
//# sourceMappingURL=index.js.map
