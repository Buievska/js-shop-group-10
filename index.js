import{a as $,i as m,S as q,N as j,P as I}from"./assets/vendor-CINvsALW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".header-logo"),t=document.querySelector(".burger-btn"),n=document.querySelector(".close-btn"),r=document.querySelector(".menu"),s=document.querySelector(".menu-overlay"),i=document.body,l=()=>{r&&s&&i&&(r.classList.add("open"),s.classList.add("visible"),i.classList.add("no-scroll"))},u=()=>{r&&s&&i&&(r.classList.remove("open"),s.classList.remove("visible"),i.classList.remove("no-scroll"))};t&&t.addEventListener("click",l),n&&n.addEventListener("click",u),s&&s.addEventListener("click",u),e&&e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("keydown",L=>{L.key==="Escape"&&u()})});const M="https://furniture-store.b.goit.study/api",b=document.getElementById("category-list"),O=document.getElementById("furniture-list"),o=document.getElementById("pagination"),f=document.getElementById("load-more-mobile");let v=1,p=[],a=1;const P=8;let w="",k=1;(function(){document.body.insertAdjacentHTML("afterbegin",`
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none;">
      <symbol id="icon-left-arrow" viewBox="0 0 32 32">
        <path d="M16.943 23.057l-5.724-5.724h12.781v-2.667h-12.781l5.724-5.724-1.885-1.885-8.943 8.943 8.943 8.943 1.885-1.885z"></path>
      </symbol>
      <symbol id="icon-right-arrow" viewBox="0 0 32 32">
        <path d="M15.057 23.057l1.885 1.885 8.943-8.943-8.943-8.943-1.885 1.885 5.724 5.724h-12.781v2.667h12.781l-5.724 5.724z"></path>
      </symbol>
    </svg>
  `)})();async function T(){const e=await fetch(`${M}/categories`);if(!e.ok)throw new Error("Помилка отримання категорій");return await e.json()}async function B(e=1,t=""){let n=`${M}/furnitures?page=${e}&limit=${P}`;t&&(n+=`&category=${t}`);const r=await fetch(n);if(!r.ok)throw new Error("Помилка отримання меблів");return await r.json()}function A(e){const t="./img/furniture-list/всі-товари.png",n={"Всі товари":"всі-товари.png","М'які меблі":"мякі-меблі.png","Шафи та системи зберігання":"шафи.png","Ліжка та матраци":"ліжка.png",Столи:"столи.png","Стільці та табурети":"стільці.png",Кухні:"кухні.png","Меблі для дитячої":"меблі-дитячі.png","Меблі для офісу":"меблі-офіс.png","Меблі для передпокою":"передпокій.png","Меблі для ванної кімнати":"меблі-вана.png","Садові та вуличні меблі":"меблі-садові.png","Декор та аксесуари":"декор.png"},r=e.map(s=>{let i=s.name.replace(/^"|"$/g,"");const u=`./img/furniture-list/${n[i]||"всі-товари.png"}`;return`
        <li class="category-btn-tile" data-category="${s._id}">
          <img src="${u}" alt="${i}" onerror="this.onerror=null;this.src='${t}'" />
          <span class="category-label">${i}</span>
        </li>
      `}).join("");b.innerHTML=`
    <li class="category-btn-tile active" data-category="">
      <img src="${t}" alt="Всі товари" />
      <span class="category-label">Всі товари</span>
    </li>
    ${r}
  `}function C(e){O.innerHTML=e.map(({images:t,name:n,color:r,price:s,_id:i})=>`
    <li class="furniture-item" data-id="${i}">
      <img src="${t[0]}" alt="${n}" />
      <div class="furniture-item-content">
        <h3>${n}</h3>
        <div>${H(r)}</div>
        <p>${s} грн</p>
        <button class="details-btn" data-id="${i}">Детальніше</button>
      </div>
    </li>
  `).join("")}function H(e){return(Array.isArray(e)?e:[e]).map(n=>`<span class="color-swatch" title="${n}" style="background-color: ${n};"></span>`).join("")}function d(e,{active:t=!1,onClick:n=null}={}){const r=document.createElement("button");return r.textContent=e,r.classList.add("page-btn"),t&&r.classList.add("active"),n&&r.addEventListener("click",n),r}function S(e,{disabled:t=!1}={},n=null){const r=document.createElement("button");r.classList.add("btn-circle"),t&&(r.disabled=!0),!t&&n&&r.addEventListener("click",n);const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width","20"),s.setAttribute("height","20");const i=document.createElementNS("http://www.w3.org/2000/svg","use");return i.setAttributeNS("http://www.w3.org/1999/xlink","href",e==="left"?"#icon-left-arrow":"#icon-right-arrow"),s.appendChild(i),r.appendChild(s),r}function h(){const e=document.createElement("span");return e.classList.add("pagination-dots"),e.innerHTML='<span class="dot"></span><span class="dot"></span><span class="dot"></span>',e}function x(e,t){if(o.innerHTML="",o.appendChild(S("left",{disabled:e===1},()=>{a--,c()})),t<=5)for(let n=1;n<=t;n++)o.appendChild(d(n,{active:n===e,onClick:()=>{a=n,c()}}));else if(e<=3){for(let n=1;n<=3;n++)o.appendChild(d(n,{active:n===e,onClick:()=>{a=n,c()}}));o.appendChild(h()),o.appendChild(d(t,{onClick:()=>{a=t,c()}}))}else if(e>=t-2){o.appendChild(d(1,{onClick:()=>{a=1,c()}})),o.appendChild(h());for(let n=t-2;n<=t;n++)o.appendChild(d(n,{active:n===e,onClick:()=>{a=n,c()}}))}else o.appendChild(d(1,{onClick:()=>{a=1,c()}})),o.appendChild(h()),o.appendChild(d(e-1,{onClick:()=>{a--,c()}})),o.appendChild(d(e,{active:!0})),o.appendChild(d(e+1,{onClick:()=>{a++,c()}})),o.appendChild(h()),o.appendChild(d(t,{onClick:()=>{a=t,c()}}));o.appendChild(S("right",{disabled:e===t},()=>{a++,c()}))}async function c(){const e=window.innerWidth<=768;try{const t=await B(e?1:a,w);k=Math.ceil(t.totalItems/P),e?(v===1&&(p=t.furnitures),C(p),f&&(f.style.display=p.length>=t.totalItems?"none":"inline-block"),o.innerHTML="",o.classList.add("hidden")):(C(t.furnitures),f&&(f.style.display="none"),k>1?(x(a,k),o.classList.remove("hidden")):(o.innerHTML="",o.classList.add("hidden")))}catch(t){console.error("Помилка завантаження меблів:",t)}}b&&b.addEventListener("click",e=>{const t=e.target.closest("li.category-btn-tile");t&&w!==t.dataset.category&&(w=t.dataset.category,a=1,v=1,p=[],[...b.children].forEach(n=>n.classList.remove("active")),t.classList.add("active"),c())});f&&f.addEventListener("click",async()=>{v++;try{const e=await B(v,w);p=[...p,...e.furnitures],C(p),p.length>=e.totalItems&&(f.style.display="none")}catch(e){console.error('Помилка завантаження меблів при "Показати ще":',e)}});(async function(){try{const t=await T();A(t),c()}catch(t){console.error("Помилка ініціалізації:",t)}})();document.querySelector(".js-feedback-cart");document.querySelector(".js-btn-back");document.querySelector(".js-btn-forward");function F(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function N(e,t=5){let n="";for(let r=1;r<=t;r++)e>=r?n+='<span class="star star--full">★</span>':e>=r-.5?n+=`
        <span class="star star--half">
          <span class="star-bg">★</span>
          <span class="star-fg">★</span>
        </span>`:n+='<span class="star star--empty">★</span>';return n}function R(e){return e.map(({name:t,descr:n,rate:r})=>`
        <div class="swiper-slide">
          <div class="feedback-item">
            <div class="star-rating">${N(F(r))}</div>
            <p class="feedback-descr">"${n}"</p>
            <p class="feedback-name">${t}</p>
          </div>
        </div>
      `).join("")}async function D(){const e=document.querySelector(".js-feedback-cart");if(e)try{const n=(await $.get("https://furniture-store.b.goit.study/api/feedbacks?limit=10")).data.feedbacks;if(!n||n.length===0){m.error({title:"Error",message:"Щось пішло не так. Спробуйте пізніше.",position:"topRight"});return}e.innerHTML=R(n);const r=n.length>3,s=5,i=new q(".feedback-slider",{modules:[j,I],slidesPerGroup:1,slidesPerView:1,spaceBetween:16,loop:!0,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(l,u){return l<s?`<span class="${u}"></span>`:""}},navigation:{nextEl:".js-btn-forward",prevEl:".js-btn-back"},breakpoints:{768:{slidesPerGroup:1,slidesPerView:2,spaceBetween:24},1440:{slidesPerGroup:1,slidesPerView:3,spaceBetween:24}}});i.on("slideChange",()=>{const l=document.querySelectorAll(".swiper-pagination-bullet");l.forEach(L=>L.classList.remove("swiper-pagination-bullet-active"));const u=i.realIndex%s;l[u].classList.add("swiper-pagination-bullet-active")})}catch{m.error({title:"Error",message:"Щось пішло не так. Спробуйте пізніше.",position:"topRight"})}}D();const y=document.querySelector(".order-modal-overlay"),E=document.querySelector(".order-modal-form");function g(e){const t=document.querySelector(".open-order");t&&(t.classList.remove("open-order"),document.removeEventListener("keydown",n=>{n.key==="Escape"&&g()}))}function V(e){y&&(e.preventDefault(),y.classList.add("open-order"),document.addEventListener("keydown",t=>{t.key==="Escape"&&g()}),y.addEventListener("click",t=>{t.target===y&&g()}))}E.addEventListener("submit",async e=>{if(e.preventDefault(),!E.checkValidity()){m.warning({title:"Увага",message:"Будь ласка, заповніть всі обов’язкові поля",position:"topRight"});return}const t=e.target.elements["user-email"].value.trim(),n=e.target.elements["user-phone"].value.trim(),r=e.target.elements["user-comment"].value.trim(),s={email:t,phone:n,modelId:"682f9bbf8acbdf505592ac36",color:"#1212ca",comment:r};try{const i=await $.post("https://furniture-store.b.goit.study/api-docs/#/order",s);m.success({title:"Готово!",message:"Замовлення успішно створено",position:"topRight"}),g(),E.reset()}catch{m.error({title:"Помилка",message:"Не вдалося створити замовлення",position:"topRight"})}});const z=document.querySelector(".order-modal-close");z.addEventListener("click",g);const G=document.querySelector(".btn-btn");G.addEventListener("click",V);
//# sourceMappingURL=index.js.map
